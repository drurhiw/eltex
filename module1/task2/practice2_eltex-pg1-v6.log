1. eltex-pg1-v6@eltex-2025-summer-16:08> ssh-keygen
eltex-pg1-v6@eltex-2025-summer-16:08> cat /home/eltex-pg1-v6/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC5MaCz7O80iMNsRoqeSicj7GGHw6XcXxqG25alSeROzxwNFkzylwb3pp9oj55pqmgTMF9eBkA9M48YGztpwAyoRSA1rFVjRf77pPHWzq44UbfUO3odk3/C3b7fl1dGo7pHwCeExllMfLuhy5MsTYgyx1Ar9+ONK7vNMOvL+1KdmndDEy77w6uE5kRqRidbaFGLvZYmHt+GUXNuPRS11vI9DwyM58i1BT9aVpIjY7YFAwZHhyRNgZ837tKSfvMJA1zvZzQYgliQ83gCm6Vy0GkDiAtxPYamR0+pwkX9xI9bec85dgsgTJlSyEsRsM2ldNA3F9IMvIfC16uG2L6U/W4uAapnDOmEzZe9SSAXzswG274pJdeqAhJgLwkFXV1FUm26xLQYAZtT1CwdfejUoS3Z/GX5gQ0i5p0FSA9SGS7MT7swk7iDj4potjA30WKwZpLZ4IXlT25cLvxzc6jHPF5kVX4FeXxjiiyEB9MvARiWIAXm51AieRAz9eYRcX2Tzo0= eltex-pg1-v6@eltex-2025-summer

2.eltex-pg1-v6@eltex-2025-summer-16:08> ssh-copy-id -i .ssh/id_rsa.pub root@172.16.9.180
root@172.16.9.180's password: 

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh 'root@172.16.9.180'"
and check to make sure that only the key(s) you wanted were added.

3. root@eltex-practice2-pg1-v6:~# cat ~/.ssh/authorized_keys 
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC5MaCz7O80iMNsRoqeSicj7GGHw6XcXxqG25alSeROzxwNFkzylwb3pp9oj55pqmgTMF9eBkA9M48YGztpwAyoRSA1rFVjRf77pPHWzq44UbfUO3odk3/C3b7fl1dGo7pHwCeExllMfLuhy5MsTYgyx1Ar9+ONK7vNMOvL+1KdmndDEy77w6uE5kRqRidbaFGLvZYmHt+GUXNuPRS11vI9DwyM58i1BT9aVpIjY7YFAwZHhyRNgZ837tKSfvMJA1zvZzQYgliQ83gCm6Vy0GkDiAtxPYamR0+pwkX9xI9bec85dgsgTJlSyEsRsM2ldNA3F9IMvIfC16uG2L6U/W4uAapnDOmEzZe9SSAXzswG274pJdeqAhJgLwkFXV1FUm26xLQYAZtT1CwdfejUoS3Z/GX5gQ0i5p0FSA9SGS7MT7swk7iDj4potjA30WKwZpLZ4IXlT25cLvxzc6jHPF5kVX4FeXxjiiyEB9MvARiWIAXm51AieRAz9eYRcX2Tzo0= eltex-pg1-v6@eltex-2025-summer
eltex-pg1-v6@eltex-2025-summer-16:08> ls -l ~/.ssh/*.pub
-rw-r--r-- 1 eltex-pg1-v6 eltex-pg1-v6 584 Jul 11 10:24 /home/eltex-pg1-v6/.ssh/id_rsa.pub
eltex-pg1-v6@eltex-2025-summer-16:08> 
root@eltex-practice2-pg1-v6:~# ls -l ~/.ssh/authorized_keys 
-rw------- 1 root root 584 Jul 11 03:31 /root/.ssh/authorized_keys
root@eltex-practice2-pg1-v6:~# 


4. root@eltex-practice2-pg1-v6:~# sudo useradd -m -s /bin/bash user1
root@eltex-practice2-pg1-v6:~# passwd user1
New password: 
Retype new password: 
passwd: password updated successfully
root@eltex-practice2-pg1-v6:~# 

5. root@eltex-practice2-pg1-v6:~# sudo adduser user2
info: Adding user `user2' ...
info: Selecting UID/GID from range 1000 to 59999 ...
info: Adding new group `user2' (1002) ...
info: Adding new user `user2' (1002) with group `user2 (1002)' ...
info: Creating home directory `/home/user2' ...
info: Copying files from `/etc/skel' ...
New password: 
Retype new password: 
passwd: password updated successfully
Changing the user information for user2
Enter the new value, or press ENTER for the default
	Full Name []: 
	Room Number []: 
	Work Phone []: 
	Home Phone []: 
	Other []: 
Is the information correct? [Y/n] Y
info: Adding new user `user2' to supplemental / extra groups `users' ...
info: Adding user `user2' to group `users' ...
root@eltex-practice2-pg1-v6:~# sudo adduser user3
info: Adding user `user3' ...
info: Selecting UID/GID from range 1000 to 59999 ...
info: Adding new group `user3' (1003) ...
info: Adding new user `user3' (1003) with group `user3 (1003)' ...
info: Creating home directory `/home/user3' ...
info: Copying files from `/etc/skel' ...
New password: 
Retype new password: 
passwd: password updated successfully
Changing the user information for user3
Enter the new value, or press ENTER for the default
	Full Name []: 
	Room Number []: 
	Work Phone []: 
	Home Phone []: 
	Other []: 
Is the information correct? [Y/n] Y
info: Adding new user `user3' to supplemental / extra groups `users' ...
info: Adding user `user3' to group `users' ...
root@eltex-practice2-pg1-v6:~# 

6. root@eltex-practice2-pg1-v6:~# usermod -s /usr/sbin/nologin user3
root@eltex-practice2-pg1-v6:~# su - user3
This account is currently not available.
root@eltex-practice2-pg1-v6:~# su -s /bin/bash user3
user3@eltex-practice2-pg1-v6:/root$ 
user3@eltex-practice2-pg1-v6:/root$ exit
exit
root@eltex-practice2-pg1-v6:~# 

7. root@eltex-practice2-pg1-v6:~# groupadd userS
root@eltex-practice2-pg1-v6:~# usermod -a -G userS user1
root@eltex-practice2-pg1-v6:~# usermod -a -G userS user2
root@eltex-practice2-pg1-v6:~# usermod -a -G userS user3
root@eltex-practice2-pg1-v6:~# groups user1
user1 : user1 userS
root@eltex-practice2-pg1-v6:~# groups user2
user2 : user2 users userS
root@eltex-practice2-pg1-v6:~# groups user3
user3 : user3 users userS

9. root@eltex-practice2-pg1-v6:~# mkdir /opt/share
root@eltex-practice2-pg1-v6:~# chown :userS /opt/share
root@eltex-practice2-pg1-v6:~# sudo chmod g+rwxs /opt/share
root@eltex-practice2-pg1-v6:~# ls -ld /opt/share
drwxrwsr-x 2 root userS 4096 Jul 11 04:14 /opt/share

10. user1@eltex-practice2-pg1-v6:~$ umask 0004
user1@eltex-practice2-pg1-v6:~$ umask
0004

11. root@eltex-practice2-pg1-v6:~# su - user1
user1@eltex-practice2-pg1-v6:~$ cd /opt/share/
user1@eltex-practice2-pg1-v6:/opt/share$ touch user1
root@eltex-practice2-pg1-v6:~# su - user2
user2@eltex-practice2-pg1-v6:~$ cd /opt/share/
user2@eltex-practice2-pg1-v6:/opt/share$ touch user2.txt
root@eltex-practice2-pg1-v6:~# su - user1
user1@eltex-practice2-pg1-v6:~$ cd /opt/share/
user1@eltex-practice2-pg1-v6:/opt/share$ ls
user1  user2.txt
user1@eltex-practice2-pg1-v6:/opt/share$ rm user1
user1@eltex-practice2-pg1-v6:/opt/share$ touch user1.txt
root@eltex-practice2-pg1-v6:~# su -s /bin/bash user3
user3@eltex-practice2-pg1-v6:/root$ cd /opt/share/
user3@eltex-practice2-pg1-v6:/opt/share$ touch user3.txt
user3@eltex-practice2-pg1-v6:/opt/share$ ls
user1.txt  user2.txt  user3.txt
user3@eltex-practice2-pg1-v6:/opt/share$ exit
exit
root@eltex-practice2-pg1-v6:~# su - user1
user1@eltex-practice2-pg1-v6:~$ cd /opt/share/
user1@eltex-practice2-pg1-v6:/opt/share$ ls
user1.txt  user2.txt  user3.txt
user1@eltex-practice2-pg1-v6:/opt/share$ rm user2.txt user3.txt 
user1@eltex-practice2-pg1-v6:/opt/share$ ls
user1.txt
user1@eltex-practice2-pg1-v6:/opt/share$ exit
logout
root@eltex-practice2-pg1-v6:~# su - user2
user2@eltex-practice2-pg1-v6:~$ cd /opt/share/
user2@eltex-practice2-pg1-v6:/opt/share$ ls
user1.txt

12. root@eltex-practice2-pg1-v6:~# chmod +t /opt/share/

13. root@eltex-practice2-pg1-v6:~# sudo visudo
root@eltex-practice2-pg1-v6:~# su - user1
user1 ALL=(ALL) /usr/bin/dmesg 
 user1@eltex-practice2-pg1-v6:~$ sudo dmesg
[sudo] password for user1: 
[    0.000000] Linux version 6.8.0-55-generic (buildd@lcy02-amd64-095) (x86_64-linux-gnu-gcc-13 (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0, GNU ld (GNU Binutils for Ubuntu) 2.42) #57-Ubuntu SMP PREEMPT_DYNAMIC Wed Feb 12 23:42:21 UTC 2025 (Ubuntu 6.8.0-55.57-generic 6.8.12)
[    0.000000] Command line: BOOT_IMAGE=/vmlinuz-6.8.0-55-generic root=/dev/mapper/ubuntu--vg-ubuntu--lv ro
[    0.000000] KERNEL supported cpus:
[    0.000000]   Intel GenuineIntel
[    0.000000]   AMD AuthenticAMD
[    0.000000]   Hygon HygonGenuine
[    0.000000]   Centaur CentaurHauls
[    0.000000]   zhaoxin   Shanghai  
[    0.000000] BIOS-provided physical RAM map:
[    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] usable
[    0.000000] BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] reserved
[    0.000000] BIOS-e820: [mem 0x0000000000100000-0x00000000bffd9fff] usable
[    0.000000] BIOS-e820: [mem 0x00000000bffda000-0x00000000bfffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000feffc000-0x00000000feffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] reserved
[    0.000000] BIOS-e820: [mem 0x0000000100000000-0x000000013fffffff] usable
[    0.000000] BIOS-e820: [mem 0x000000fd00000000-0x000000ffffffffff] reserved
[    0.000000] NX (Execute Disable) protection: active
[    0.000000] APIC: Static calls initialized
[    0.000000] SMBIOS 2.8 present.
[    0.000000] DMI: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.3-0-ga6ed6b701f0a-prebuilt.qemu.org 04/01/2014
[    0.000000] Hypervisor detected: KVM
[    0.000000] kvm-clock: Using msrs 4b564d01 and 4b564d00
[    0.000004] kvm-clock: using sched offset of 8024161336335 cycles
[    0.000012] clocksource: kvm-clock: mask: 0xffffffffffffffff max_cycles: 0x1cd42e4dffb, max_idle_ns: 881590591483 ns
[    0.000021] tsc: Detected 3399.998 MHz processor
[    0.001249] e820: update [mem 0x00000000-0x00000fff] usable ==> reserved
[    0.001257] e820: remove [mem 0x000a0000-0x000fffff] usable
[    0.052276] AGP: No AGP bridge found
[    0.052752] last_pfn = 0x140000 max_arch_pfn = 0x400000000
[    0.052821] MTRR map: 4 entries (3 fixed + 1 variable; max 19), built from 8 variable MTRRs
[    0.052834] x86/PAT: Configuration [0-7]: WB  WC  UC- UC  WB  WP  UC- WT  
[    0.052913] last_pfn = 0xbffda max_arch_pfn = 0x400000000
[    0.054997] found SMP MP-table at [mem 0x000f5450-0x000f545f]
[    0.055597] RAMDISK: [mem 0x2fccd000-0x33e5dfff]
[    0.056905] ACPI: Early table checksum verification disabled
[    0.056927] ACPI: RSDP 0x00000000000F5250 000014 (v00 BOCHS )
[    0.056943] ACPI: RSDT 0x00000000BFFE3BE2 000038 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.056959] ACPI: FACP 0x00000000BFFE39C4 000074 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.056974] ACPI: DSDT 0x00000000BFFDF040 004984 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.056980] ACPI: FACS 0x00000000BFFDF000 000040
[    0.056985] ACPI: APIC 0x00000000BFFE3A38 000080 (v03 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.056989] ACPI: SSDT 0x00000000BFFE3AB8 0000CA (v01 BOCHS  VMGENID  00000001 BXPC 00000001)
[    0.056995] ACPI: HPET 0x00000000BFFE3B82 000038 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.056998] ACPI: WAET 0x00000000BFFE3BBA 000028 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.057004] ACPI: Reserving FACP table memory at [mem 0xbffe39c4-0xbffe3a37]
[    0.057007] ACPI: Reserving DSDT table memory at [mem 0xbffdf040-0xbffe39c3]
[    0.057009] ACPI: Reserving FACS table memory at [mem 0xbffdf000-0xbffdf03f]
[    0.057011] ACPI: Reserving APIC table memory at [mem 0xbffe3a38-0xbffe3ab7]
[    0.057012] ACPI: Reserving SSDT table memory at [mem 0xbffe3ab8-0xbffe3b81]
[    0.057014] ACPI: Reserving HPET table memory at [mem 0xbffe3b82-0xbffe3bb9]
[    0.057015] ACPI: Reserving WAET table memory at [mem 0xbffe3bba-0xbffe3be1]
[    0.057561] No NUMA configuration found
[    0.057568] Faking a node at [mem 0x0000000000000000-0x000000013fffffff]
[    0.057585] NODE_DATA(0) allocated [mem 0x13ffd2000-0x13fffcfff]
[    0.058102] Zone ranges:
[    0.058119]   DMA      [mem 0x0000000000001000-0x0000000000ffffff]
[    0.058122]   DMA32    [mem 0x0000000001000000-0x00000000ffffffff]
[    0.058125]   Normal   [mem 0x0000000100000000-0x000000013fffffff]
[    0.058127]   Device   empty
[    0.058129] Movable zone start for each node
[    0.058133] Early memory node ranges
[    0.058133]   node   0: [mem 0x0000000000001000-0x000000000009efff]
[    0.058137]   node   0: [mem 0x0000000000100000-0x00000000bffd9fff]
[    0.058138]   node   0: [mem 0x0000000100000000-0x000000013fffffff]
[    0.058140] Initmem setup node 0 [mem 0x0000000000001000-0x000000013fffffff]
[    0.058172] On node 0, zone DMA: 1 pages in unavailable ranges
[    0.058256] On node 0, zone DMA: 97 pages in unavailable ranges
[    0.074213] On node 0, zone Normal: 38 pages in unavailable ranges
[    0.075348] ACPI: PM-Timer IO Port: 0x608
[    0.075389] ACPI: LAPIC_NMI (acpi_id[0xff] dfl dfl lint[0x1])
[    0.075444] IOAPIC[0]: apic_id 0, version 17, address 0xfec00000, GSI 0-23
[    0.075450] ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 dfl dfl)
[    0.075455] ACPI: INT_SRC_OVR (bus 0 bus_irq 5 global_irq 5 high level)
[    0.075457] ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high level)
[    0.075460] ACPI: INT_SRC_OVR (bus 0 bus_irq 10 global_irq 10 high level)
[    0.075462] ACPI: INT_SRC_OVR (bus 0 bus_irq 11 global_irq 11 high level)
[    0.075468] ACPI: Using ACPI (MADT) for SMP configuration information
[    0.075473] ACPI: HPET id: 0x8086a201 base: 0xfed00000
[    0.075489] smpboot: Allowing 2 CPUs, 0 hotplug CPUs
[    0.075545] kvm-guest: APIC: eoi() replaced with kvm_guest_apic_eoi_write()
[    0.075597] PM: hibernation: Registered nosave memory: [mem 0x00000000-0x00000fff]
[    0.075600] PM: hibernation: Registered nosave memory: [mem 0x0009f000-0x0009ffff]
[    0.075602] PM: hibernation: Registered nosave memory: [mem 0x000a0000-0x000effff]
[    0.075603] PM: hibernation: Registered nosave memory: [mem 0x000f0000-0x000fffff]
[    0.075605] PM: hibernation: Registered nosave memory: [mem 0xbffda000-0xbfffffff]
[    0.075606] PM: hibernation: Registered nosave memory: [mem 0xc0000000-0xfeffbfff]

14. root@eltex-practice2-pg1-v6:~# sudo chage -M 10 user1
root@eltex-practice2-pg1-v6:~# sudo chage -M 10 user2
root@eltex-practice2-pg1-v6:~# sudo chage -M 10 user3

15. root@eltex-practice2-pg1-v6:~# nano /etc/motd
Дарья Сергеева

16. root@eltex-practice2-pg1-v6:~# rsync -av /etc/ /root/etc_backup/
sending incremental file list
created directory /root/etc_backup
./
.pwd.lock
.resolv.conf.systemd-resolved.bak

17. tar -czvf etc_backup.tar.gz /root/etc_backup
tar -cjvf etc_backup.tar.bz2 /root/etc_backup
tar -cJvf etc_backup.tar.xz /root/etc_backup
root@eltex-practice2-pg1-v6:~# ls -lh
total 1.1M
drwxr-xr-x 109 root root 4.0K Jul 11 07:50 etc_backup
-rw-r--r--   1 root root    0 Jul 11 08:02 etc_backup.tar.bz2
-rw-r--r--   1 root root 582K Jul 11 08:00 etc_backup.tar.gz
-rw-r--r--   1 root root 471K Jul 11 08:02 etc_backup.tar.xz
-rw-r--r--   1 root root  13K Jul 11 08:04 practice2_eltex-pg1-v6.log

18. Дарья Сергеева 11.07.2025 15:06
root@eltex-practice2-pg1-v6:~# rsync -av /etc/ /root/etc_backup/
sending incremental file list
./
motd

sent 69,744 bytes  received 286 bytes  140,060.00 bytes/sec
total size is 2,362,163  speedup is 33.73

tar -rvf /root/etc_backup.tar etc_backup/
tar -rvf /root/etc_backup.tar /etc/motd
gzip -f /root/etc_backup.tar

19. root@eltex-practice2-pg1-v6:~# sudo mkdir -p /root/temp_compare
root@eltex-practice2-pg1-v6:~# sudo tar -xjf /root/etc_backup.tar.bz2 -C /root/temp_compare
root@eltex-practice2-pg1-v6:~# sudo ls -la /root/temp_compare
total 12
drwxr-xr-x 3 root root 4096 Jul 12 13:10 .
drwx------ 8 root root 4096 Jul 12 13:09 ..
drwxr-xr-x 3 root root 4096 Jul 12 13:10 root
root@eltex-practice2-pg1-v6:~# sudo diff -r --no-dereference \
    --exclude="mtab" \
    --exclude="os-release" \
    --exclude="resolv.conf" \
    /root/temp_compare/root/etc_backup /root/etc_backup
root@eltex-practice2-pg1-v6:~# 

20. root@eltex-practice2-pg1-v6:~# sudo mkdir /root/etc_backup_gzip
root@eltex-practice2-pg1-v6:~# sudo mkdir /root/etc_backup_7zip
root@eltex-practice2-pg1-v6:~# sudo tar -xzf /root/etc_backup.tar.gz -C /root/etc_backup_gzip/
root@eltex-practice2-pg1-v6:~# sudo tar -xJf /root/etc_backup.tar.xz -C /root/etc_backup_7zip
root@eltex-practice2-pg1-v6:~# sudo diff /root/etc_backup_gzip/etc/motd /root/etc_backup_7zip/root/etc_backup/motd

1c1
< Дарья Сергеева 11.07.2025 15:06
---
> Дарья Сергеева
root@eltex-practice2-pg1-v6:~# 

